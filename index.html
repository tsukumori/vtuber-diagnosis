<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VTuberã‚¿ã‚¤ãƒ—è¨ºæ–­</title>
<style>
body {
  font-family: sans-serif;
  text-align: center;
  padding: clamp(20px, 6vw, 40px);
  font-size: clamp(16px, 4.5vw, 18px);
}

h1 {
  font-size: clamp(22px, 6vw, 28px);
}

input {
  font-size: clamp(16px, 4.5vw, 18px);
  padding: 10px;
  width: min(90%, 320px);
}

button {
  padding: 14px 20px;
  margin: 10px;
  font-size: clamp(16px, 4.5vw, 18px);
  min-width: min(90%, 280px);
  cursor: pointer;
  border-radius: 8px;
  border: none;
}

/* æˆ»ã‚‹ãƒœã‚¿ãƒ³å°‚ç”¨ */
.backButton {
  background: #666;
  color: #fff;
  border: none;
  border-radius: 8px;
}

#question {
  font-size: clamp(18px, 5.5vw, 22px);
  margin-bottom: 24px;
}

#progress {
  margin-top: 16px;
  font-size: 14px;
  opacity: 0.8;
}

#result {
  font-size: clamp(20px, 6vw, 24px);
  font-weight: bold;
  margin-top: 24px;
}

/* ===== ã‚¹ãƒãƒ›å°‚ç”¨èª¿æ•´ ===== */
@media (max-width: 480px) {
  body {
    font-size: 18px;
  }

  h1 {
    font-size: 26px;
  }

  input {
    font-size: 18px;
    padding: 14px;
  }

  button {
    font-size: 18px;
    padding: 16px 20px;
  }

  #question {
    font-size: 22px;
  }

  #result {
    font-size: 24px;
  }

  #resultImage img {
    max-width: 100%;
  }
}
</style>
</head>
<body>

<h1>VTuberã‚¿ã‚¤ãƒ—è¨ºæ–­ï¼ˆãƒ‡ãƒ¢ã‚µã‚¤ãƒˆï¼‰</h1>

<div id="inputArea">
  <p>å…¨12å•ãƒ»æ‰€è¦æ™‚é–“ ç´„2åˆ†</p>
  <p>
    ãŠåå‰ï¼ˆä»»æ„ï¼‰<br>
    <input id="nameInput">
  </p>

  <button onclick="startDiagnosis()">è¨ºæ–­ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
</div>

<div id="diagnosisArea" style="display:none;">
  <div id="question"></div>
  <div id="buttons"></div>
  <div id="progress"></div>
  <button class="backButton" onclick="goBack()">â† æˆ»ã‚‹</button>
</div>

<div id="resultArea" style="display:none;">
  <div id="result"></div>
  <div id="resultImage"></div>
  <button id="shareBtn">Xã§å…±æœ‰</button>
</div>

<script>
/* =====================
   å®šæ•°ãƒ»å¤‰æ•°
===================== */
const resultList = [
  null,
  "ã¿ã‚“ãªã‚’é€£ã‚Œã¦ã„ãå†’é™ºåœ°å›³",
  "æ­¢ã¾ã‚‰ãªã„ãŠã—ã‚ƒã¹ã‚Šãƒªãƒƒãƒ—",
  "ãƒãƒªã§æ’ƒã¤ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¬ãƒ³",
  "ä¸€ç¬ã§æ²¸ã‹ã™ãƒ‰æ´¾æ‰‹ã‚¯ãƒ©ãƒƒã‚«ãƒ¼",
  "å®‰å®šé‹ç”¨ã®ç ‚æ™‚è¨ˆ",
  "è©±é¡Œç„¡é™ã®åœ°çƒå„€",
  "å®Œç’§ä¸»ç¾©ã®ãƒã‚§ãƒƒã‚¯è…•æ™‚è¨ˆ",
  "æ€ã„å‡ºã‚’æŒŸã‚€æŠ¼ã—èŠ±ã®æ ",
  "èŠ¯ã®ã‚ã‚‹ä¸‡å¹´ç­†",
  "å¤¢è¦‹ãŒã¡ãªã‚­ãƒ©ã‚­ãƒ©ä¸‡è¯é¡",
  "æ­£ç›´ä¸€ç›´ç·šã®ç‹é“ã‚½ãƒ¼ãƒ‰",
  "ã‹ã¾ã£ã¦ã»ã—ã„ã†ã•è€³",
  "ä¸–ç•Œã‚’çµ„ã¿ç«‹ã¦ã‚‹å°æœ¬ãƒãƒ¼ãƒˆ",
  "å¤œã«ã²ã‚‰ãæ—¥è¨˜å¸³",
  "å†·é™æ²ˆç€ã®çœŸé¢ç›®ã•ã‚“çŸ¥æ€§ãƒ¡ã‚¬ãƒ",
  "ã“ã¨ã°ãŒé€ã‘ã‚‹ç¹Šç´°ã‚¬ãƒ©ã‚¹ãƒšãƒ³"
];

const resultKeyMap = {
  "0000":1,"0001":2,"0010":3,"0011":4,
  "0100":5,"0101":6,"0110":7,"0111":8,
  "1000":9,"1001":10,"1010":11,"1011":12,
  "1100":13,"1101":14,"1110":15,"1111":16
};

let userName = "";
let scores = {A:0,B:0,C:0,D:0};
let current = 0;
let history = [];

const questions = [
 { axis: "A", text: "é…ä¿¡ã®ç†æƒ³ã¯ï¼Ÿ", choices: ["ä¸€äººã§é»™ã€…ã‚„ã‚‹", "ã©ã¡ã‚‰ã§ã‚‚", "èª°ã‹ã¨ä¸€ç·’ã«ã‚„ã‚‹"] },
 { axis: "A", text: "ãƒˆãƒ©ãƒ–ãƒ«ãŒèµ·ããŸã¨ãã€ã©ã†ã™ã‚‹ï¼Ÿ", choices: ["ã¾ãšä¸€äººã§è€ƒãˆã‚‹", "å ´åˆã«ã‚ˆã‚‹", "ã™ãèª°ã‹ã«ç›¸è«‡"] },
 { axis: "A", text: "ã‚³ãƒ©ãƒœé…ä¿¡ã«ã¤ã„ã¦ã©ã†æ€ã†ï¼Ÿ", choices: ["æ­£ç›´ã‚ã¾ã‚Šå¾—æ„ã˜ã‚ƒãªã„", "ã©ã¡ã‚‰ã¨ã‚‚è¨€ãˆãªã„", "å¤§å¥½ãï¼ç©æ¥µçš„"] },

 { axis: "B", text: "é…ä¿¡å†…å®¹ã‚’æ±ºã‚ã‚‹ã¨ãã¯ï¼Ÿ", choices: ["æ•°å­—ã‚„åå¿œã‚’é‡è¦–", "åŠã€…ãã‚‰ã„", "æ°—åˆ†ã‚„ãƒãƒª"] },
 { axis: "B", text: "é…ä¿¡å¾Œã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚„ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã‚‹ï¼Ÿ", choices: ["ã‹ãªã‚Šç´°ã‹ãè¦‹ã‚‹", "ãŸã¾ã«è¦‹ã‚‹", "ã»ã¨ã‚“ã©è¦‹ãªã„"] },
 { axis: "B", text: "ä¼¸ã³ã‚‹é…ä¿¡ã«å¿…è¦ã ã¨æ€ã†ã®ã¯ï¼Ÿ", choices: ["åˆ†æã¨æ”¹å–„", "ä¸¡æ–¹å¤§äº‹", "å‹¢ã„ã¨ç†±é‡"] },

 { axis: "C", text: "ç†æƒ³ã®é…ä¿¡æ™‚é–“ã¯ï¼Ÿ", choices: ["1æ™‚é–“å‰å¾Œ", "2ã€œ3æ™‚é–“", "æ°—ã¥ã„ãŸã‚‰é•·æ™‚é–“"] }, 
 { axis: "C", text: "é…ä¿¡ä¸­ã®é›†ä¸­åŠ›ã¯ï¼Ÿ", choices: ["çŸ­æœŸé›†ä¸­å‹", "æ³¢ãŒã‚ã‚‹", "é•·ãç¶šã"] }, 
 { axis: "C", text: "ã‚²ãƒ¼ãƒ ã‚„ä½œæ¥­ã«ãƒãƒã‚‹ã¨ï¼Ÿ", choices: ["ã™ãé£½ãã‚‹", "ã‚‚ã®ã«ã‚ˆã‚‹", "ä½•æ™‚é–“ã‚‚ã‚„ã‚‹"] },

 { axis: "D", text: "é…ä¿¡æº–å‚™ã¯ã©ã‚Œãã‚‰ã„ã™ã‚‹ï¼Ÿ", choices: ["ã»ã¼ãƒãƒ¼ãƒ—ãƒ©ãƒ³", "æœ€ä½é™", "ã—ã£ã‹ã‚Š"] }, 
 { axis: "D", text: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ã¯ï¼Ÿ", choices: ["ã‚†ã‚‹ã‚", "æ™®é€š", "ãã£ã¡ã‚Š"] }, 
 { axis: "D", text: "å°æœ¬ã‚„é€²è¡Œè¡¨ã«ã¤ã„ã¦", choices: ["ã‚ã¾ã‚Šä½¿ã‚ãªã„", "ã‚ã‚‹ã¨å®‰å¿ƒ", "å¿…é ˆ"] }
];

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}

function startDiagnosis(){
  userName = document.getElementById("nameInput").value.trim();
  shuffle(questions);
  document.getElementById("inputArea").style.display="none";
  document.getElementById("diagnosisArea").style.display="block";
  showQuestion();
}

function showQuestion(){
  const q = questions[current];
  document.getElementById("question").textContent = `Q${current+1}. ${q.text}`;
  document.getElementById("progress").textContent =
    `é€²è¡ŒçŠ¶æ³ï¼š${current+1} / ${questions.length}`;
  const buttons = document.getElementById("buttons");
  buttons.innerHTML="";
  q.choices.forEach((c,i)=>{
    const b=document.createElement("button");
    b.textContent=c;
    b.onclick=()=>answer(i-1);
    buttons.appendChild(b);
  });
}

function answer(v){
  const a=questions[current].axis;
  history.push({a,v});
  scores[a]+=v;
  current++;
  current<questions.length ? showQuestion() : showResult(calcResult());
}

function goBack(){
  if(current === 0){
    document.getElementById("diagnosisArea").style.display = "none";
    document.getElementById("inputArea").style.display = "block";
    return;
  }
  current--;
  const h=history.pop();
  scores[h.a]-=h.v;
  showQuestion();
}

function calcResult(){
  let key="";
  ["A","B","C","D"].forEach(a=>{
    key+=scores[a]>=0?"0":"1";
  });
  return resultKeyMap[key];
}

function showResult(num){
  document.getElementById("diagnosisArea").style.display="none";
  document.getElementById("resultArea").style.display="block";

  const title = userName ? `${userName}ã•ã‚“ã®è¨ºæ–­çµæœ` : "ã‚ãªãŸã®è¨ºæ–­çµæœ";
  document.getElementById("result").textContent = title;

  document.getElementById("resultImage").innerHTML =
    `<img src="images/${num}.png" alt="è¨ºæ–­çµæœç”»åƒ" style="width:100%;max-width:600px;margin-top:24px;">`;

  const tweetText =
    `${title}ã¯ã€Œ${resultList[num]}ã€ã§ã—ãŸğŸ©µâœ¨
ã‚ãªãŸã¯ä½•ãŒå‡ºã‚‹ï¼Ÿ

#VTuberã‚¿ã‚¤ãƒ—è¨ºæ–­ #NyanProLab`;

  document.getElementById("shareBtn").onclick = ()=>{
    window.open(
      "https://twitter.com/intent/tweet?text=" +
      encodeURIComponent(tweetText),
      "_blank"
    );
  };
}
</script>

</body>
</html>
