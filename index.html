<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>VTuber„Çø„Ç§„ÉóË®∫Êñ≠</title>
<style>
body {
  font-family: sans-serif;
  text-align: center;
  padding: clamp(16px, 5vw, 40px);
  font-size: clamp(14px, 3.5vw, 16px);
}
button {
  padding: 10px 16px;
  margin: 6px;
  font-size: clamp(13px, 3.5vw, 15px);
  min-width: 220px;
  cursor: pointer;
}
#question {
  font-size: clamp(16px, 4.5vw, 20px);
  margin-bottom: 20px;
}
#result {
  font-size: clamp(18px, 5vw, 22px);
  font-weight: bold;
  margin-top: 20px;
}
.switches {
  position: fixed;
  top: 10px;
  right: 10px;
  border: 1px solid #ccc;
  padding: 10px;
  background: #f9f9f9;
  font-size: clamp(11px, 3vw, 12px);
}
</style>
</head>
<body>

<h1>VTuber„Çø„Ç§„ÉóË®∫Êñ≠</h1>

<div id="inputArea">
  <p>
    Ê¥ªÂãïÂêçÔºàÂøÖÈ†àÔºâ<br>
    <input id="nameInput">
  </p>

  <p>
    SNSÔºà‰ªªÊÑèÔºâ<br>
    <input id="snsInput">
  </p>

  <button onclick="startDiagnosis()">Ë®∫Êñ≠„Çπ„Çø„Éº„Éà</button>
</div>

<div id="diagnosisArea" style="display:none;">
  <div id="question"></div>
  <div id="buttons"></div>
  <button onclick="goBack()">‚Üê Êàª„Çã</button>
</div>

<div id="resultArea" style="display:none;">
  <div id="result"></div>
  <div id="resultImage"></div>
  <button id="shareBtn">X„ÅßÂÖ±Êúâ</button><br>
  <button onclick="restart()">„ÇÇ„ÅÜ‰∏ÄÂ∫¶Ë®∫Êñ≠</button>
</div>

<script>
/* =====================
   ÂÆöÊï∞„ÉªÂ§âÊï∞
===================== */
const resultList = [
  null,
  "„Åø„Çì„Å™„ÇíÈÄ£„Çå„Å¶„ÅÑ„ÅèÂÜíÈô∫Âú∞Âõ≥",
  "Ê≠¢„Åæ„Çâ„Å™„ÅÑ„Åä„Åó„ÇÉ„Åπ„Çä„É™„ÉÉ„Éó",
  "„Éé„É™„ÅßÊíÉ„Å§„Çπ„Éî„Éº„Éâ„Ç¨„É≥",
  "‰∏ÄÁû¨„ÅßÊ≤∏„Åã„Åô„ÉâÊ¥æÊâã„ÇØ„É©„ÉÉ„Ç´„Éº",
  "ÂÆâÂÆöÈÅãÁî®„ÅÆÁ†ÇÊôÇË®à",
  "Ë©±È°åÁÑ°Èôê„ÅÆÂú∞ÁêÉÂÑÄ",
  "ÂÆåÁíß‰∏ªÁæ©„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØËÖïÊôÇË®à",
  "ÊÄù„ÅÑÂá∫„ÇíÊåü„ÇÄÊäº„ÅóËä±„ÅÆÊ†û",
  "ËäØ„ÅÆ„ÅÇ„Çã‰∏áÂπ¥Á≠Ü",
  "Â§¢Ë¶ã„Åå„Å°„Å™„Ç≠„É©„Ç≠„É©‰∏áËèØÈè°",
  "Ê≠£Áõ¥‰∏ÄÁõ¥Á∑ö„ÅÆÁéãÈÅì„ÇΩ„Éº„Éâ",
  "„Åã„Åæ„Å£„Å¶„Åª„Åó„ÅÑ„ÅÜ„ÅïËÄ≥",
  "‰∏ñÁïå„ÇíÁµÑ„ÅøÁ´ã„Å¶„ÇãÂè∞Êú¨„Éé„Éº„Éà",
  "Â§ú„Å´„Å≤„Çâ„ÅèÊó•Ë®òÂ∏≥",
  "ÂÜ∑ÈùôÊ≤àÁùÄ„ÅÆÁúüÈù¢ÁõÆ„Åï„ÇìÁü•ÊÄß„É°„Ç¨„Éç",
  "„Åì„Å®„Å∞„ÅåÈÄè„Åë„ÇãÁπäÁ¥∞„Ç¨„É©„Çπ„Éö„É≥"
];

const resultKeyMap = {
  "0000":1,"0001":2,"0010":3,"0011":4,
  "0100":5,"0101":6,"0110":7,"0111":8,
  "1000":9,"1001":10,"1010":11,"1011":12,
  "1100":13,"1101":14,"1110":15,"1111":16
};

let userName = "";
let userSNS = "";
let scores = {A:0,B:0,C:0,D:0};
let current = 0;
let history = [];

const questions = [
 { axis: "A", text: "ÈÖç‰ø°„ÅÆÁêÜÊÉ≥„ÅØÔºü", choices: ["‰∏Ä‰∫∫„ÅßÈªô„ÄÖ„ÇÑ„Çã", "„Å©„Å°„Çâ„Åß„ÇÇ", "Ë™∞„Åã„Å®‰∏ÄÁ∑í„Å´„ÇÑ„Çã"] },
 { axis: "A", text: "„Éà„É©„Éñ„É´„ÅåËµ∑„Åç„Åü„Å®„Åç„ÄÅ„Å©„ÅÜ„Åô„ÇãÔºü", choices: ["„Åæ„Åö‰∏Ä‰∫∫„ÅßËÄÉ„Åà„Çã", "Â†¥Âêà„Å´„Çà„Çã", "„Åô„ÅêË™∞„Åã„Å´Áõ∏Ë´á"] },
 { axis: "A", text: "„Ç≥„É©„ÉúÈÖç‰ø°„Å´„Å§„ÅÑ„Å¶„Å©„ÅÜÊÄù„ÅÜÔºü", choices: ["Ê≠£Áõ¥„ÅÇ„Åæ„ÇäÂæóÊÑè„Åò„ÇÉ„Å™„ÅÑ", "„Å©„Å°„Çâ„Å®„ÇÇË®Ä„Åà„Å™„ÅÑ", "Â§ßÂ•Ω„ÅçÔºèÁ©çÊ•µÁöÑ"] },

 { axis: "B", text: "ÈÖç‰ø°ÂÜÖÂÆπ„ÇíÊ±∫„ÇÅ„Çã„Å®„Åç„ÅØÔºü", choices: ["Êï∞Â≠ó„ÇÑÂèçÂøú„ÇíÈáçË¶ñ", "Âçä„ÄÖ„Åè„Çâ„ÅÑ", "Ê∞óÂàÜ„ÇÑ„Éé„É™"] },
 { axis: "B", text: "ÈÖç‰ø°Âæå„ÄÅ„Ç¢„Éº„Ç´„Ç§„Éñ„ÇÑ„Éá„Éº„Çø„ÇíË¶ã„ÇãÔºü", choices: ["„Åã„Å™„ÇäÁ¥∞„Åã„ÅèË¶ã„Çã", "„Åü„Åæ„Å´Ë¶ã„Çã", "„Åª„Å®„Çì„Å©Ë¶ã„Å™„ÅÑ"] },
 { axis: "B", text: "‰º∏„Å≥„ÇãÈÖç‰ø°„Å´ÂøÖË¶Å„Å†„Å®ÊÄù„ÅÜ„ÅÆ„ÅØÔºü", choices: ["ÂàÜÊûê„Å®ÊîπÂñÑ", "‰∏°ÊñπÂ§ß‰∫ã", "Âã¢„ÅÑ„Å®ÁÜ±Èáè"] },

 { axis: "C", text: "ÁêÜÊÉ≥„ÅÆÈÖç‰ø°ÊôÇÈñì„ÅØÔºü", choices: ["1ÊôÇÈñìÂâçÂæå", "2„Äú3ÊôÇÈñì", "Ê∞ó„Å•„ÅÑ„Åü„ÇâÈï∑ÊôÇÈñì"] }, 
 { axis: "C", text: "ÈÖç‰ø°‰∏≠„ÅÆÈõÜ‰∏≠Âäõ„ÅØÔºü", choices: ["Áü≠ÊúüÈõÜ‰∏≠Âûã", "Ê≥¢„Åå„ÅÇ„Çã", "Èï∑„ÅèÁ∂ö„Åè"] }, 
 { axis: "C", text: "„Ç≤„Éº„É†„ÇÑ‰ΩúÊ•≠„Å´„Éè„Éû„Çã„Å®Ôºü", choices: ["„Åô„ÅêÈ£Ω„Åç„Çã", "„ÇÇ„ÅÆ„Å´„Çà„Çã", "‰ΩïÊôÇÈñì„ÇÇ„ÇÑ„Çã"] },

 { axis: "D", text: "ÈÖç‰ø°Ê∫ñÂÇô„ÅØ„Å©„Çå„Åè„Çâ„ÅÑ„Åô„ÇãÔºü", choices: ["„Åª„Åº„Éé„Éº„Éó„É©„É≥", "ÊúÄ‰ΩéÈôê", "„Åó„Å£„Åã„Çä"] }, 
 { axis: "D", text: "„Çπ„Ç±„Ç∏„É•„Éº„É´ÁÆ°ÁêÜ„ÅØÔºü", choices: ["„ÇÜ„Çã„ÇÅ", "ÊôÆÈÄö", "„Åç„Å£„Å°„Çä"] }, 
 { axis: "D", text: "Âè∞Êú¨„ÇÑÈÄ≤Ë°åË°®„Å´„Å§„ÅÑ„Å¶", choices: ["„ÅÇ„Åæ„Çä‰Ωø„Çè„Å™„ÅÑ", "„ÅÇ„Çã„Å®ÂÆâÂøÉ", "ÂøÖÈ†à"] }
];

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}

function startDiagnosis(){
  userName = document.getElementById("nameInput").value.trim();
  userSNS  = document.getElementById("snsInput").value.trim();
  if(!userName){ alert("Ê¥ªÂãïÂêç„ÇíÂÖ•Âäõ„Åó„Å¶„Å≠"); return; }
  shuffle(questions);
  document.getElementById("inputArea").style.display="none";
  document.getElementById("diagnosisArea").style.display="block";
  showQuestion();
}

function showQuestion(){
  const q = questions[current];
  document.getElementById("question").textContent = `Q${current+1}. ${q.text}`;
  const buttons = document.getElementById("buttons");
  buttons.innerHTML="";
  q.choices.forEach((c,i)=>{
    const b=document.createElement("button");
    b.textContent=c;
    b.onclick=()=>answer(i-1);
    buttons.appendChild(b);
  });
}

function answer(v){
  const a=questions[current].axis;
  history.push({a,v});
  scores[a]+=v;
  current++;
  current<questions.length ? showQuestion() : showResult(calcResult());
}

function goBack(){
  if(current===0)return;
  current--;
  const h=history.pop();
  scores[h.a]-=h.v;
  showQuestion();
}

function calcResult(){
  let key="";
  ["A","B","C","D"].forEach(a=>{
    key+=scores[a]>=0?"0":"1";
  });
  return resultKeyMap[key];
}

function showResult(num){
  document.getElementById("diagnosisArea").style.display="none";
  document.getElementById("resultArea").style.display="block";

  document.getElementById("result").textContent =
    `${userName}„Åï„Çì„ÅÆË®∫Êñ≠ÁµêÊûúÔºö${resultList[num]}`;

  document.getElementById("resultImage").innerHTML =
    `<img src="images/${num}.png" alt="Ë®∫Êñ≠ÁµêÊûúÁîªÂÉè" style="max-width:450px;margin-top:20px;">`;

  const tweetText =
    `${userName}„Åï„Çì„ÅÆÈÖç‰ø°„Çπ„Çø„Ç§„É´„Å´ÊúÄÈÅ©„Å™„Ç¢„Ç§„ÉÜ„É†„ÅØ„Äå${resultList[num]}„Äç„Åß„Åó„Åüü©µ‚ú®
„ÅÇ„Å™„Åü„ÅØ‰Ωï„ÅåÂá∫„ÇãÔºü

#VTuber„Çø„Ç§„ÉóË®∫Êñ≠ #NyanProLab`;

  document.getElementById("shareBtn").onclick = ()=>{
    window.open(
      "https://twitter.com/intent/tweet?text=" +
      encodeURIComponent(tweetText),
      "_blank"
    );
  };
}

function restart(){
  scores={A:0,B:0,C:0,D:0};
  current=0; history=[];
  document.getElementById("resultArea").style.display="none";
  document.getElementById("inputArea").style.display="block";
}
</script>

</body>
</html>
