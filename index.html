<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VTuberã‚¿ã‚¤ãƒ—è¨ºæ–­</title>
<style>
body {
  font-family: sans-serif;
  text-align: center;
  padding: clamp(20px, 6vw, 40px);
  font-size: clamp(16px, 4.5vw, 18px);
}

h1 {
  font-size: clamp(22px, 6vw, 28px);
}

input {
  font-size: clamp(16px, 4.5vw, 18px);
  padding: 10px;
  width: min(90%, 320px);
}

button {
  padding: 14px 20px;
  margin: 10px;
  font-size: clamp(16px, 4.5vw, 18px);
  min-width: min(90%, 280px);
  cursor: pointer;
  border-radius: 8px;
  border: none;
}

.backButton {
  background: #666;
  color: #fff;
  border: none;
  border-radius: 8px;
}

#question {
  font-size: clamp(18px, 5.5vw, 22px);
  margin-bottom: 24px;
}

#progress {
  margin-top: 16px;
  font-size: 14px;
  opacity: 0.8;
}

#result {
  font-size: clamp(20px, 6vw, 24px);
  font-weight: bold;
  margin-top: 24px;
}

/* ===== ã‚¹ãƒãƒ›å°‚ç”¨èª¿æ•´ ===== */
@media (max-width: 480px) {
  body {
    font-size: 18px;
  }

  h1 {
    font-size: 26px;
  }

  input {
    font-size: 18px;
    padding: 14px;
  }

  button {
    font-size: 18px;
    padding: 16px 20px;
  }

  #question {
    font-size: 22px;
  }

  #result {
    font-size: 24px;
  }

  #resultImage img {
    max-width: 100%;
  }
}
</style>
</head>
<body>

<h1>VTuberã‚¿ã‚¤ãƒ—è¨ºæ–­ï¼ˆãƒ‡ãƒ¢ã‚µã‚¤ãƒˆï¼‰</h1>

<div id="inputArea">
  <p>å…¨12å•ãƒ»æ‰€è¦æ™‚é–“ ç´„2åˆ†</p>
  <p>
    ãŠåå‰ï¼ˆä»»æ„ï¼‰<br>
    <input id="nameInput">
  </p>

  <button onclick="startDiagnosis()">è¨ºæ–­ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
</div>

<div id="diagnosisArea" style="display:none;">
  <div id="question"></div>
  <div id="buttons"></div>
  <div id="progress"></div>
  <button class="backButton" onclick="goBack()">â† æˆ»ã‚‹</button>
</div>

<div id="resultArea" style="display:none;">
  <div id="result"></div>
  <div id="resultImage"></div>
  <button id="shareBtn">Xã§å…±æœ‰</button>
</div>

<script>
/* =====================
   å®šæ•°ãƒ»å¤‰æ•°
===================== */
const resultList = [
  null,
  "ã¿ã‚“ãªã‚’é€£ã‚Œã¦ã„ãå†’é™ºåœ°å›³",
  "æ­¢ã¾ã‚‰ãªã„ãŠã—ã‚ƒã¹ã‚Šãƒªãƒƒãƒ—",
  "ãƒãƒªã§æ’ƒã¤ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¬ãƒ³",
  "ä¸€ç¬ã§æ²¸ã‹ã™ãƒ‰æ´¾æ‰‹ã‚¯ãƒ©ãƒƒã‚«ãƒ¼",
  "å®‰å®šé‹ç”¨ã®ç ‚æ™‚è¨ˆ",
  "è©±é¡Œç„¡é™ã®åœ°çƒå„€",
  "å®Œç’§ä¸»ç¾©ã®ãƒã‚§ãƒƒã‚¯è…•æ™‚è¨ˆ",
  "æ€ã„å‡ºã‚’æŒŸã‚€æŠ¼ã—èŠ±ã®æ ",
  "èŠ¯ã®ã‚ã‚‹ä¸‡å¹´ç­†",
  "å¤¢è¦‹ãŒã¡ãªã‚­ãƒ©ã‚­ãƒ©ä¸‡è¯é¡",
  "æ­£ç›´ä¸€ç›´ç·šã®ç‹é“ã‚½ãƒ¼ãƒ‰",
  "ã‹ã¾ã£ã¦ã»ã—ã„ã†ã•è€³",
  "ä¸–ç•Œã‚’çµ„ã¿ç«‹ã¦ã‚‹å°æœ¬ãƒãƒ¼ãƒˆ",
  "å¤œã«ã²ã‚‰ãæ—¥è¨˜å¸³",
  "å†·é™æ²ˆç€ã®çœŸé¢ç›®ã•ã‚“çŸ¥æ€§ãƒ¡ã‚¬ãƒ",
  "ã“ã¨ã°ãŒé€ã‘ã‚‹ç¹Šç´°ã‚¬ãƒ©ã‚¹ãƒšãƒ³"
];

const resultKeyMap = {
  "0000":1,"0001":2,"0010":3,"0011":4,
  "0100":5,"0101":6,"0110":7,"0111":8,
  "1000":9,"1001":10,"1010":11,"1011":12,
  "1100":13,"1101":14,"1110":15,"1111":16
};

let userName = "";
let scores = {A:0,B:0,C:0,D:0};
let current = 0;
let history = [];

const questions = [
 { axis: "A", text: "VTuberã¨ã—ã¦æ´»å‹•ã™ã‚‹ã¨ã—ãŸã‚‰ã€ã„ã¡ã°ã‚“æ¥½ã—ã¿ãªã®ã¯ã©ã‚Œï¼Ÿ", choices: ["è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§è€ƒãˆãŸã“ã¨ã‚’ã€ãã®ã¾ã¾å½¢ã«ã§ãã‚‹ã“ã¨", "ã©ã¡ã‚‰ã‚‚åŒã˜ãã‚‰ã„æ¥½ã—ã¿", "ãƒªã‚¹ãƒŠãƒ¼ã‚„å‘¨ã‚Šã¨ä¸€ç·’ã«ç©ºæ°—ã‚’ä½œã£ã¦ã„ãã“ã¨"] },
 { axis: "A", text: "é…ä¿¡ä¸­ã®ç©ºæ°—æ„Ÿã«ã¤ã„ã¦ã€ã©ã‚ŒãŒä¸€ç•ªè¿‘ã„ï¼Ÿ", choices: ["è©±ã—ãŸã„ã“ã¨ã‚’è©±ã›ã‚Œã°æº€è¶³", "ç©ºæ°—ã«åˆã‚ã›ã¦èª¿æ•´ã™ã‚‹", "å ´ã®åå¿œã‚’æ„Ÿã˜ãªãŒã‚‰è©±ã—ãŸã„"] },
 { axis: "A", text: "å‰µä½œã‚„ç™ºä¿¡ã‚’ã™ã‚‹ã¨ãã€ã©ã‚“ãªç’°å¢ƒãŒä¸€ç•ªã‚„ã‚Šã‚„ã™ã„ï¼Ÿ", choices: ["ä¸€äººã§é›†ä¸­ã§ãã‚‹ç’°å¢ƒ", "ã©ã¡ã‚‰ã§ã‚‚ã„ã‘ã‚‹", "èª°ã‹ã¨ä¸€ç·’ã«ã‚„ã‚‹ç’°å¢ƒ"] },

 { axis: "B", text: "æ€ã£ãŸé€šã‚Šã«ã„ã‹ãªã‹ã£ãŸã¨ãã€ã¾ãšé ­ã«æµ®ã‹ã¶ã®ã¯ï¼Ÿ", choices: ["ä½•ãŒåŸå› ã ã£ãŸã‹", "ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚„ç›¸æ€§ã‚‚ã‚ã‚‹", "ã¾ã‚æ¥½ã—ã‹ã£ãŸã‹ã‚‰OK"] },
 { axis: "B", text: "VTuberæ´»å‹•ã®æŒ¯ã‚Šè¿”ã‚Šã‚’ã™ã‚‹ã¨ã—ãŸã‚‰ï¼Ÿ", choices: ["ãƒ¡ãƒ¢ã‚’å–ã£ã¦æ”¹å–„ç‚¹ã‚’è€ƒãˆãŸã„", "æ°—ã«ãªã£ãŸã¨ã“ã‚ã ã‘è¦‹ã‚‹", "ã‚ã¾ã‚ŠæŒ¯ã‚Šè¿”ã‚‰ãšæ¬¡ã«è¡Œã"] },
 { axis: "B", text: "æƒ³å®šå¤–ã®ã“ã¨ãŒèµ·ããŸã¨ãã€ã¾ãšé ­ã«æµ®ã‹ã¶ã®ã¯ï¼Ÿ", choices: ["åŸå› ã‚„å¯¾å‡¦æ–¹æ³•", "æ§˜å­ã‚’è¦‹ã¦ã‹ã‚‰è€ƒãˆã‚‹", "ã¨ã‚Šã‚ãˆãšæ¥½ã—ã‚‚ã†"] },

 { axis: "C", text: "ä½•ã‹ã«é›†ä¸­ã—ãŸã‚ã¨ã€è¿‘ã„æ„Ÿè¦šã¯ï¼Ÿ", choices: ["ã¡ã‚‡ã†ã©ã„ã„ã¨ã“ã‚ã§åŒºåˆ‡ã‚ŠãŸããªã‚‹", "ã¾ã ã„ã‘ã‚‹ã‹ãªã¨æ€ã†", "æ°—ã¥ã„ãŸã‚‰ã‹ãªã‚Šæ™‚é–“ãŒçµŒã£ã¦ã„ã‚‹"] }, 
 { axis: "C", text: "é…ä¿¡ä¸­ã®é›†ä¸­åŠ›ã¯ï¼Ÿ", choices: ["çŸ­æœŸé›†ä¸­å‹", "æ³¢ãŒã‚ã‚‹", "é•·ãç¶šã"] }, 
 { axis: "C", text: "ã‚²ãƒ¼ãƒ ã‚„ä½œæ¥­ã«ãƒãƒã‚‹ã¨ï¼Ÿ", choices: ["ã™ãé£½ãã‚‹", "ã‚‚ã®ã«ã‚ˆã‚‹", "ä½•æ™‚é–“ã‚‚ã‚„ã‚‹"] },

 { axis: "D", text: "äºˆå®šã—ã¦ã„ãŸæµã‚ŒãŒå´©ã‚ŒãŸã¨ãã€ã©ã†ãªã‚Šã‚„ã™ã„ï¼Ÿ", choices: ["ã¾ã‚ã„ã£ã‹ã€ä»Šã®æµã‚Œã§é€²ã‚€", "æ§˜å­ã‚’è¦‹ãªãŒã‚‰èª¿æ•´ã™ã‚‹", "ã§ãã‚‹ã ã‘å…ƒã®å½¢ã«æˆ»ã—ãŸã„"] }, 
 { axis: "D", text: "èª¬æ˜ã‚„é€²è¡Œã‚’ä»»ã•ã‚ŒãŸã¨ãã®ã‚¹ã‚¿ãƒ³ã‚¹ã¯ï¼Ÿ", choices: ["ãªã‚“ã¨ãªãæµã‚Œã§", "è¦ç‚¹ã ã‘æŠ¼ã•ãˆã‚‹", "ãã¡ã‚“ã¨é †ç•ªã‚’æ±ºã‚ãŸã„"] }, 
 { axis: "D", text: "çŸ¥ã‚‰ãªã„äººãŒè¦‹ã¦ã‚‚å¤§ä¸ˆå¤«ã‹ã©ã†ã‹ã€ã©ã‚Œãã‚‰ã„æ°—ã«ãªã‚‹ï¼Ÿ", choices: ["ã‚ã¾ã‚Šæ°—ã«ã—ãªã„", "æ°—ã¥ã„ãŸã‚‰å°‘ã—ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹", "èª°ã§ã‚‚åˆ†ã‹ã‚‹ã‚ˆã†ã«æ•´ãˆã¦ãŠããŸã„"] }
];

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}

function startDiagnosis(){
  userName = document.getElementById("nameInput").value.trim();
  shuffle(questions);
  document.getElementById("inputArea").style.display="none";
  document.getElementById("diagnosisArea").style.display="block";
  showQuestion();
}

function showQuestion(){
  const q = questions[current];
  document.getElementById("question").textContent = `Q${current+1}. ${q.text}`;
  document.getElementById("progress").textContent =
    `é€²è¡ŒçŠ¶æ³ï¼š${current+1} / ${questions.length}`;
  const buttons = document.getElementById("buttons");
  buttons.innerHTML="";
  q.choices.forEach((c,i)=>{
    const b=document.createElement("button");
    b.textContent=c;
    b.onclick=()=>answer(i-1);
    buttons.appendChild(b);
  });
}

function answer(v){
  const a=questions[current].axis;
  history.push({a,v});
  scores[a]+=v;
  current++;
  current<questions.length ? showQuestion() : showResult(calcResult());
}

function goBack(){
  if(current === 0){
    document.getElementById("diagnosisArea").style.display = "none";
    document.getElementById("inputArea").style.display = "block";
    return;
  }
  current--;
  const h=history.pop();
  scores[h.a]-=h.v;
  showQuestion();
}

function calcResult(){
  let key="";
  ["A","B","C","D"].forEach(a=>{
    key+=scores[a]>=0?"0":"1";
  });
  return resultKeyMap[key];
}

function showResult(num){
  document.getElementById("diagnosisArea").style.display="none";
  document.getElementById("resultArea").style.display="block";

  const title = userName ? `${userName}ã•ã‚“ã®è¨ºæ–­çµæœ` : "ã‚ãªãŸã®è¨ºæ–­çµæœ";
  document.getElementById("result").textContent = title;

  document.getElementById("resultImage").innerHTML =
    `<img src="images/${num}.png" alt="è¨ºæ–­çµæœç”»åƒ" style="width:100%;max-width:600px;margin-top:24px;">`;

  const tweetText =
    `${title}ã¯ã€Œ${resultList[num]}ã€ã§ã—ãŸğŸ©µâœ¨
ã‚ãªãŸã¯ä½•ãŒå‡ºã‚‹ï¼Ÿ

#VTuberã‚¿ã‚¤ãƒ—è¨ºæ–­ #NyanProLab`;

  document.getElementById("shareBtn").onclick = ()=>{
    window.open(
      "https://twitter.com/intent/tweet?text=" +
      encodeURIComponent(tweetText),
      "_blank"
    );
  };
}
</script>

</body>
</html>
